(()=>{"use strict";var t=/^[a-z0-9.!#$%\\\&'*+\/=?^_`{}~-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,n=[];function a(){$(".tag-box").each((function(t,n){$(n).height()>50&&$(n).find("textarea").attr("style","width:0;opacity:0;display:none")}))}function e(t,e){var c=$(e).attr("id"),s=t.val().split(", ").pop();(o(s)||""==s)&&t.focusout((function(){var e=t.val().split(", ").pop();if(a(),o(e)){var s,r=null!==(s=t.data("tag-class"))&&void 0!==s?s:"",u=i(e,c,r);n.push(u),$(u).insertBefore(t),t.val("")}else t.val("")}))}function i(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return'\n\t\t<div class="tag '.concat(a,'">\n\t\t\t<span class="tag__content">\n\t\t\t\t').concat(_.escape(t),'\n\t\t\t</span>\n\t\t\t<input type="hidden" name="').concat(_.escape(n),'[]" value="').concat(_.escape(t),'"/>\n\t\t\t<span class="tag__icon-remove pl-2">Ã—</span>\n\t\t</div>')}function o(n){return t.test(n)}$(document).ready((function(){$(".input-tag").on("keydown",(function(t){(13==t.keyCode||13==t.keyCode&&t.shiftKey)&&(t.preventDefault(),$(this).attr("rows",1))})),$("#body").on("keydown",(function(t){13==t.keyCode&&t.shiftKey&&t.preventDefault()})),a()})),$(".input-tag").on("click",(function(){var t=$(this).closest(".tag-box"),a=$(this).attr("id"),c=$("#".concat(a));!function(t,a){var e=$(a).attr("id");t.keyup((function(a){if(32===a.keyCode||13===a.keyCode){var c=t.val().split(", ").pop();if(32===a.keyCode&&(c=c.slice(0,-1)),o(c)){var s,r=null!==(s=t.data("tag-class"))&&void 0!==s?s:"",u=i(c,e,r);n.push(u),$(u).insertBefore(t),t.val("")}}}))}(c,t),e(c,t)})),$(".tag-box").on("click",(function(){$(this).find(".tag-box__input.input-tag").removeAttr("style"),$(this).find("textarea").focus(),e($(this).find("textarea"),$(this))})),$(".tag-box").on("click","span.tag__icon-remove",(function(){$(this).parents(".tag").remove()}))})();