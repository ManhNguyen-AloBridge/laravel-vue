(()=>{"use strict";var t={2424:(t,e,i)=>{function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{Z:()=>a});const a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,"self",void 0),o(this,"btnContinue",void 0),o(this,"fillTextElements",void 0),this.self=e,this.btnContinue=this.self.find(".modal-footer .btn.continue"),this.fillTextElements=this.self.find(".modal-body span.fill-text-position")}var e,i,a;return e=t,(i=[{key:"fillTextInDeleteMessage",value:function(t){this.fillTextElements.text(t)}}])&&n(e.prototype,i),a&&n(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}()}},e={};function i(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n](a,a.exports,i),a.exports}i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=i(2424);function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"self",void 0),n(this,"model",void 0),n(this,"modal",void 0),n(this,"form",void 0),n(this,"btnShowCreate",void 0),n(this,"btnCreate",void 0),n(this,"btnUpdate",void 0),n(this,"btnCancel",void 0),n(this,"addRow",void 0),n(this,"btnCancelOfAddRow",void 0),n(this,"editRows",void 0),n(this,"prefixDeleteMessage",""),n(this,"fieldDeleteMessage","name"),this.self=e,this.modal=i,this.model=this.self.attr("data-model"),this.form=this.self.find("#form-"+this.model),this.btnShowCreate=e.find('.form-table__button-group button[data-button-type="show-add-button"]'),this.btnCreate=this.self.find('.form-table__button-group button[data-button-type="add"]'),this.btnUpdate=this.self.find('.form-table__button-group button[data-button-type="update"]'),this.btnCancel=this.self.find('.form-table__button-group button[data-button-type="cancel"]'),this.addRow=this.self.find('.form-table__row[data-form="add-new"]'),this.btnCancelOfAddRow=this.addRow.find("button"),this.editRows=this.self.find('.form-table__row:not([data-form="add-new"])'),this.getDefaultDisplay(),this.addButtonsEvent(),this.addEditRowsEvent(),this.modal.btnContinue.click(function(){this.submitFormDelete()}.bind(this))}var i,o,a;return i=t,(o=[{key:"cancel",value:function(){return function(){var t=this.getOldFocus();this.addRow.find("input").val(""),null!==t&&(this.backRowToOldValue(t.inputs),this.removeFocusInput(t.inputs)),this.removeValidateError(),this.cancelAction()}.bind(this)}},{key:"removeValidateError",value:function(){var t;null===(t=this.self.find(".validation-error"))||void 0===t||t.each((function(){$(this).remove()}))}},{key:"addButtonsEvent",value:function(){this.btnShowCreate.click(this.showAdd()),this.btnCancel.click(this.cancel()),this.btnCancelOfAddRow.click(this.cancel()),this.btnCreate.click(function(){var t=this.btnCreate.attr("data-route-handle");this.form.attr("action",t),this.submitFormCreate()}.bind(this)),this.btnUpdate.click(this.submitFormUpdate.bind(this))}},{key:"addEditRowsEvent",value:function(){var t=this;this.editRows.each((function(){var e=$(this).find('button[data-control-name="edit"]'),i=$(this).find('button[data-control-name="delete"]'),n=$(this).find("input"),o=$(this).attr("data-item-id");e.click((function(){var i=e.attr("data-route-handle");t.showUpdate(),t.focusInput(n),t.btnCancel.attr("data-edit-row-id",o),t.form.attr("data-item-id",o),t.form.attr("action",i)})),i.click((function(){var e=i.attr("data-route-handle"),o=n.filter("[name="+t.fieldDeleteMessage+"]").val();t.form.attr("action",e),t.modal.fillTextInDeleteMessage(o)}))}))}},{key:"showAdd",value:function(){return function(){this.btnShowCreate.hide(),this.btnCreate.show(),this.btnCancel.show(),this.addRow.show();var t=this.addRow.find("input").eq(1),e=t.val().length;t.first().focus(),t.first()[0].setSelectionRange(e,e)}.bind(this)}},{key:"showUpdate",value:function(){this.btnShowCreate.hide(),this.btnCreate.hide(),this.btnUpdate.show(),this.btnCancel.show(),this.addRow.hide()}},{key:"cancelAction",value:function(){this.btnCancel.hide(),this.btnCreate.hide(),this.btnUpdate.hide(),this.btnShowCreate.show(),this.addRow.hide()}},{key:"focusInput",value:function(t){var e=null!==this.getOldFocus()?this.getOldFocus():null;null!==e&&(this.removeFocusInput(e.inputs),this.backRowToOldValue(e.inputs)),t.closest(".form-table__row").addClass("--edit"),t.prop("disabled",!1);var i=t.eq(1).val().length;t.eq(1).focus(),t.eq(1)[0].setSelectionRange(i,i)}},{key:"removeFocusInput",value:function(t){this.addRow.hide(),t.prop("readonly",!0),t.closest(".form-table__row").removeClass("--edit")}},{key:"submitFormCreate",value:function(){this.updateFormMethod("POST");var t=this.addRow.find("input").clone();t.attr("type","hidden"),this.form.append(t),this.form.submit()}},{key:"submitFormUpdate",value:function(){this.updateFormMethod("PUT");var t=this.form.attr("data-item-id"),e=this.getEditRow(t).find("input").clone();e.attr("type","hidden"),this.form.append(e),this.form.submit()}},{key:"submitFormDelete",value:function(){this.updateFormMethod("Delete"),this.form.submit()}},{key:"getEditRow",value:function(t){return this.editRows.filter((function(){return $(this).attr("data-item-id")==t}))}},{key:"getDefaultDisplay",value:function(){var t=this.editRows.filter((function(t,e){return $(e).hasClass("--edit")}));if(this.btnShowCreate.show(),this.btnCreate.hide(),this.btnUpdate.hide(),this.btnCancel.hide(),this.addRow.hide(),this.form.parent().find("p").hasClass("validation-error")&&this.showAdd()(),t.length)return this.showUpdate(),void this.btnCancel.attr("data-edit-row-id",$(t[0]).data("item-id"))}},{key:"getOldFocus",value:function(){var t,e=null!==(t=this.btnCancel.attr("data-edit-row-id"))&&void 0!==t?t:null;if(null==e)return null;var i=this.getEditRow(e),n=i.find("input"),o=i.find('.form-table__row__button-group button[data-control-name="edit"]');return{row:i,inputs:n,btnEdit:o}}},{key:"backRowToOldValue",value:function(t){t.each((function(){var t=$(this).attr("data-origin-value");$(this).val(t)}))}},{key:"updateFormMethod",value:function(t){this.form.find('input[name="_method"]').val(t)}}])&&e(i.prototype,o),a&&e(i,a),Object.defineProperty(i,"prototype",{writable:!1}),t}();$(".card-form-table-input").each((function(){var e=$(this).find(".form-table"),i=$(this).find(".modal"),n=new t.Z(i);new o(e,n)}))})()})();