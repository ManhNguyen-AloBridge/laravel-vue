(()=>{"use strict";function e(e){var t=e.length;$(".datatable.dataTable").attr("count-item-selected",t),t>=50?($(".checkbox__input").not(":checked").prop("disabled",!0),$("#form-download .checkbox__input").prop("disabled",!1)):$(".checkbox__input").not(":checked").prop("disabled",!1)}function t(e,t){for(var a=0;a<t.length;a++){var c=t[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function a(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const c=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"hostElement",void 0),a(this,"bounce",void 0),this.hostElement=document.querySelector("#loading")}var c,i,n;return c=e,(i=[{key:"show",value:function(){this.hostElement.classList.add("--show")}},{key:"hide",value:function(e){var t=this;this.bounce&&clearTimeout(this.bounce),this.bounce=setTimeout((function(){t.hostElement.classList.remove("--show")}),void 0===e?e:500)}}])&&t(c.prototype,i),n&&t(c,n),Object.defineProperty(c,"prototype",{writable:!1}),e}());var i={};function n(e){var t=e?$("#list-input-mail-send"):$("#list-input-mail-download"),a="";$("#list-name-staff").remove(),i.listStaffSelected.forEach((function(c){e||(a="".concat(a,", ").concat(c.name)),t.append('<input type="hidden" class="input-rendered" name="list_staff_email[]" value="'.concat(_.escape(c.email),'">'))})),!e&&a.length>0&&$("#list-name-staff-download").append('<p class="m-0" id="list-name-staff">'.concat(_.escape(a.slice(2)),"</p>"))}function l(e,t){e?t.prop("checked",!0).attr("checked","checked"):t.prop("checked",!1).removeAttr("checked")}function d(){var e=$(".select-box.--input.select-and-or__option")[0].offsetWidth,t=$(".select-box.--input.form__control")[0].offsetWidth-e-10;$.each($(".select2.select2-container").find("ul"),(function(e,a){$(a).find("li").attr("style","max-width:".concat(t,"px !important"))}))}!function(t){t.listStaffSelected=[];var a=$(".datatable.dataTable").DataTable(),c=[];function i(){var e=$(".checkbox-item").length,t=$(".checkbox-item:checked").length,i=a.page.info().page;if(e!=t)return c.includes(i)&&c.splice(c.indexOf(i),1),void n(!1,$(".datatable").find(".check-all"));c.push(i),n(!0,$(".datatable").find(".check-all"))}function n(e,a){if($(a).not(".check-all").length>0&&0==50-t.listStaffSelected.length)return void a.each((function(a,c){null===(i=t.listStaffSelected[a])||void 0===i||i.email,$(c).attr("id");var i,n=t.listStaffSelected.map((function(e){return e.email}));if(n.includes($(c).attr("id"))){if(e)return void $(c).prop("checked",!0).attr("checked","checked");l(e,$(c))}}));l(e,a)}function l(e,t){e?t.prop("checked",!0).attr("checked","checked"):t.prop("checked",!1).removeAttr("checked")}function d(){0!=t.listStaffSelected.length?$(".btn-dropdown").each((function(e,t){$(t).prop("disabled",!1),$(t).removeClass("--disabled")})):$(".btn-dropdown").each((function(e,t){$(t).prop("disabled",!0),$(t).addClass("--disabled")}))}$(document).ready((function(){d()})),$(".datatable.dataTable").on("page.dt",(function(){c.includes(a.page.info().page)?$(".check-all").prop("checked",!0).attr("checked","checked").attr("disabled",!1):$(".check-all").prop("checked",!1).removeAttr("checked")})).dataTable(),$(".datatable.dataTable").on("draw.dt",(function(){e(t.listStaffSelected)})),$(".datatable.dataTable").on("click",".check-all",(function(){var c=$(".check-all").attr("checked");a.page.info();c?(n(!1,$(".check-all")),n(!1,$(".datatable").find(".checkbox-item")),$(".datatable").find(".checkbox-item").map((function(e,a){t.listStaffSelected.find((function(e,c){if(e.email==a.id)return t.listStaffSelected.splice(c,1)}))}))):(!function(e){var a=t.listStaffSelected.length,c=e.length,i=50-a;if(i-c<0){return e.slice(0,i).map((function(e,a){t.listStaffSelected.push({name:a.value,email:a.id})}))}e.map((function(e,a){t.listStaffSelected.push({name:a.value,email:a.id})}))}($(".datatable").find(".checkbox-item:not(:checked)")),n(!0,$(".check-all")),n(!0,$(".datatable").find(".checkbox-item"))),i(),d(),!t.listStaffSelected.length>0?$(".btn-disable").addClass("disabled").attr("disabled","disabled"):$(".btn-disable").removeClass("disabled").removeAttr("disabled"),e(t.listStaffSelected)})),$(".datatable.dataTable").on("click",".checkbox-item",(function(){var a;$(this).attr("checked")?($(this).removeAttr("checked").prop("checked",!1),a=$(this).attr("id"),t.listStaffSelected.find((function(e,c){if(e.email==a)return t.listStaffSelected.splice(c,1)}))):($(this).not(".check-all").attr("checked","checked").prop("checked",!0),t.listStaffSelected.push({name:$(this).val(),email:$(this).attr("id")})),d(),i(),t.listStaffSelected.length>0?$(".btn-disable").removeClass("disabled").removeAttr("disabled"):$(".btn-disable").addClass("disabled").attr("disabled","disabled"),e(t.listStaffSelected)}))}(i),$(document).ready((function(){$("input[type=checkbox]").prop("checked",!1).removeAttr("checked"),d(),$("a.link-detail").on("click",(function(){c.show()})),$("#btn-search").on("click",(function(){c.show(),setTimeout((function(){c.hide()}),1e3)}))})),$(".select-normal").on("change",(function(){""==$(this).val()?$(this).addClass("empty"):$(this).removeClass("empty")})),$(".select-normal").trigger("change"),$("#is-hidden").on("click",(function(){var e=$(this).attr("checked");e&&l(e,!$(this))})),$("#form-download").on("submit",(function(){c.hide(),$("#download-cv-modal").modal("hide")})),$(".datatable.dataTable").on("click",".detail-staff-submit",(function(){var e=$(this).closest("form")[0];$(e).submit()})),$("#send-cv-selected").on("submit",(function(){n(!0)})),$("#download-cv-selected").on("click",(function(){$(".input-rendered").remove();var e=$(this).attr("is-name-hidden");n(!1),l(e,$("#is-hidden"))})),$(".select2").on("select2:select",(function(e){d()}))})();